<!--  

===============================================================================
This is a command input file for the WAAPI tool.

Build Version: 5.50.37

===============================================================================
This command file is part of the integration configuration of IBM Tivoli
Application Dependency Discovery Manager (TADDM) and Tivoli Netcool/OMNIbus.

Running this command file by using the WAAPI tool will create tools and a menu
on the Tivoli Netcool/OMNIbus Web GUI server. The tools provide
launch-in-context navigation from the Tivoli Netcool/OMNIbus Web GUI to the
TADDM console or TADDM Web interface.

(Events for the tool are generated by the 'TADDM OMP module' and are captured
by the EIF probe.)
===============================================================================
Compatibility:
	Tivoli Netcool/OMNIbus Web GUI V7.3
	TADDM V7.1.2
===============================================================================
See also:
	tivoli_eif_taddm.rules
===============================================================================

--> 

<methodCall>

	<!-- Delete items before rerunning through WAAPI -->
	<!--
	
	<method methodName="filter.deleteFilter">
		<filter name="TADDM" type="global"/>
	</method>

	<method methodName="menu.deleteMenu">
		<supermenu name="TADDM"> </supermenu>
	</method>

	<method methodName="tool.deleteTool">
		<tool:tool name="TADDMDetailsConsole"/>
		<tool:tool name="TADDMDetailsWeb"/>
		<tool:tool name="TADDMConfigHistoryConsole"/>
		<tool:tool name="TADDMConfigHistoryWeb"/>
	</method>

        -->


	<!-- Create filter to show only TADDM change events -->

	<method methodName="filter.addFilter">
		<filter name="TADDM" sql="Class = 87721" type="global"/>
	</method>


	<!-- Create tools to launch into TADDM web or java console -->

	<method methodName="tool.createTool">

		<tool:tool name="TADDMDetailsConsole">
		<tool:access>
			<tool:osfield>
				<tool:criterion name="Class">
					<tool:equals value="87721"/>
				</tool:criterion>
			</tool:osfield>
			<tool:security/>
		</tool:access>
		<tool:script 
			foreach="false"
			command="window.open(&quot;{@URL}/cdm/servlet/LICServlet?guid={@AlertKey}&quot;);"
		/>	

		</tool:tool>	
		<tool:tool name="TADDMDetailsWeb">
		<tool:access>
			<tool:osfield>
				<tool:criterion name="Class">
					<tool:equals value="87721"/>
				</tool:criterion>
			</tool:osfield>
			<tool:security/>
		</tool:access>
		<tool:script 
			foreach="false"
                        command="window.open(&quot;{@URL}/cdm/servlet/LICServlet?guid={@AlertKey}&amp;console=web&quot;,&quot;ael_taddm_details&quot;).focus();"
		/>	
		</tool:tool>	
	
		<tool:tool name="TADDMConfigHistoryConsole">
		<tool:access>
			<tool:osfield>
				<tool:criterion name="Class">
					<tool:equals value="87721"/>
				</tool:criterion>
			</tool:osfield>
			<tool:security/>
		</tool:access>
		<tool:script 
			foreach="false"
			command="window.open(&quot;{@URL}/cdm/servlet/LICServlet?guid={@AlertKey}&amp;view=changehistory&quot;);"
		/>	
		</tool:tool>	
	
		<tool:tool name="TADDMConfigHistoryWeb">
		<tool:access>
			<tool:osfield>
				<tool:criterion name="Class">
					<tool:equals value="87721"/>
				</tool:criterion>
			</tool:osfield>
			<tool:security/>
		</tool:access>
		<tool:script 
			foreach="false"
                        command="window.open(&quot;{@URL}/cdm/servlet/LICServlet?guid={@AlertKey}&amp;console=web&amp;view=changehistory&quot;,&quot;ael_taddm_history&quot;).focus();"
		/>	
		</tool:tool>	

	</method>

	
	<!-- Menu -->

	<method methodName="menu.createMenu">
		<supermenu name="TADDM" label="TADDM">
			<tool name="TADDMDetailsConsole"       label="Config Item Details (console)" />
			<tool name="TADDMDetailsWeb"           label="Config Item Details (web)" />
			<tool name="TADDMConfigHistoryConsole" label="Change History (console)"/>
			<tool name="TADDMConfigHistoryWeb"     label="Change History (web)" />
		</supermenu>
	</method>

</methodCall>
